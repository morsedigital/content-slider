!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("@djforth/viewport-detection-fp")):"function"==typeof define&&define.amd?define(["@djforth/viewport-detection-fp"],n):(t=t||self).VanillaCarousel=n(t.ViewportDetect)}(this,function(e){"use strict";function m(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e=e&&e.hasOwnProperty("default")?e.default:e;var i=function(t,n,e){t.classList.add("content-slider--animate"),t.addEventListener("transitionend",e,!0),window.requestAnimationFrame(function(){t.style.transform="translateX(".concat(n,")")})},c=function t(n){var e=n.target;e.removeEventListener("transitionend",t,!0),e instanceof Element&&(e.classList.remove("content-slider--animate"),e.removeAttribute("aria-hidden"))},s=function t(n){var e=n.target;e.removeEventListener("transitionend",t,!0),e instanceof Element&&(e.classList.remove("content-slider--animate"),e.style.transform="translateX(-110%)",e.setAttribute("aria-hidden","true"))},r=function(t){i(t,"0",c)},l=function(t){i(t,"110%",s)},h=function(a){var o=0;return{next:function(){var t=a[o];o=o+1>=a.length?0:o+1;var n=a[o];return r(n),l(t),o},previous:function(){var t=a[o];o=o-1<=-1?a.length-1:o-1;var n,e,r=a[o];return(n=r).style.transform="translateX(110%)",setTimeout(function(){i(n,"0",c)},10),e=t,setTimeout(function(){i(e,"-110%",s)},10),o},select:function(t){var n=a[t],e=a[o];return o=t,r(n),l(e),o}}},u="content-slider__button",a=function(t){var n=0!==t?u:"".concat(u," ").concat(u,"--active");return"<li class='content-slider__nav-item'>\n    <button data-slide=\"".concat(t,'" class="').concat(n,'">\n      <span class="hidden">Item ').concat(t,'</span>\n      <span class="hidden current">').concat(0===t?"current":"","</span>\n    </button>\n  </li>")},d=function(t){return"<div class='content-slider__nav'>\n      <ul class='content-slider__nav-items'>\n        ".concat((n=t,Array.apply(null,{length:n}).map(Number.call,Number)).map(a).join(""),"\n      </ul>\n    </div>");var n},p=function(t,n,r){t.insertAdjacentHTML("beforeend",d(n));var e,a=m(t.querySelectorAll(".".concat(u))),o=(e=a,function(r){e.forEach(function(t,n){var e=t.lastElementChild;e&&(e.innerHTML=r===n?"current":""),r===n?t.classList.add("".concat(u,"--active")):t.classList.remove("".concat(u,"--active"))})});return a.forEach(function(e){e.addEventListener("click",function(t){t.preventDefault();var n=parseInt(e.dataset.slide,10);o(n),r.select(n)})}),function(t){o(t)}},o=function(t){var n=m(t.querySelectorAll(".".concat(t.dataset.contentSlider)));if(!(n.length<=1)){n.forEach(function(t,n){t.classList.add("content-slider"),t.style.transform=0!==n?(t.setAttribute("aria-hidden","true"),"translateX(-110%)"):"translateX(0)"});var e,r,c,a,o,i,s,l,u,d,f=h(n),v=p(t,n.length,f);e=t,l=(r={next:function(){v(f.next())},previous:function(){console.count("trigger previous"),v(f.previous())}}).next,u=r.previous,c={x:0,y:0},d=function(t){var n,e,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"start",a=t.changedTouches[0],o=a.pageX,i=a.pageY;return"start"===r?(c.x=o,void(c.y=i)):{distance:{x:o-c.x,y:i-c.y},direction:{horizontal:(n=c.x,e=o,n+100<e?"right":e<n-100?"left":"none"),vertical:i>c.y+100?"down":"up"}}},e.addEventListener("touchstart",(a=d,function(t){a(t)}),!1),e.addEventListener("touchend",(o=d,i=l,s=u,function(t){var n=o(t,"end").direction.horizontal;"left"===n?s():"right"===n&&i()}),!1)}},f=function(t){m(t.querySelectorAll(".".concat(t.dataset.contentSlider))).forEach(function(t){t.classList.remove("content-slider"),t.removeAttribute("aria-hidden"),t.style.transform=""});var n=document.querySelector(".content-slider__nav");n&&t.removeChild(n)};return function(){var n=m(document.querySelectorAll("[data-content-slider]"));if(0===n.length)return null;var t=e();"mobile"===t.getDevice()&&n.forEach(o),t.addCallback(function(t){"mobile"===t?n.forEach(o):n.forEach(f)}),t.track()}});
//# sourceMappingURL=index.js.map
